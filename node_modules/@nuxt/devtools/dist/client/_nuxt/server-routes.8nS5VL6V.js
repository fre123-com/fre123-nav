import{d as ie,r as B,bm as Te,o as a,l as _,p as c,G as L,h as x,f as e,bn as re,t as A,n as I,v as J,a9 as Qe,aa as te,F as N,m as M,a6 as he,a0 as Xe,a as R,w as Ve,i as b,j as $,X as Re,_ as ye,bo as Ue,bp as je,ay as Ye,bq as Ze,br as et,bs as tt,bt as ot,ab as nt,au as st,aw as me,ac as at,az as lt,a_ as rt,bu as it,e as ut,a2 as De,k as Z,I as ee,at as dt,V as ct,A as Ee,bv as pt,bw as ft,ah as vt,U as mt,bx as ht,ao as yt}from"./entry.Li7bMdxw.js";import{_ as bt}from"./NNavbar.vue.VnwEajb6.js";import{_ as Ie}from"./NBadge.02P0N0hm.js";import{_ as Ne}from"./NSelect.vue.zI1gfDpy.js";import{_ as gt}from"./NCheckbox.vue.m1__cenQ.js";import{u as Oe,_ as _t}from"./storage-options.-PhoDnIp.js";import{_ as kt}from"./DataSchemaButton.vue.kfghTUAM.js";import{_ as wt}from"./NCodeBlock.vue.D7jhLEjr.js";import{C as xe,S as qe}from"./constants.jFgWOlQV.js";import{q as Ct}from"./json-editor-vue.qZEps2wJ.js";import{_ as xt}from"./NSectionBlock.vAf-kGVD.js";import{_ as St}from"./NDrawer.vue.biTr62KW.js";import"./client.UdRQ7dYn.js";import"./NIconTitle.vue.B_Ui7cce.js";const le=/^[\u0009\u0020-\u007E\u0080-\u00FF]+$/;function $t(t,l){if(typeof t!="string")throw new TypeError("argument str must be a string");const n={},h=(l||{}).decode||Rt;let w=0;for(;w<t.length;){const v=t.indexOf("=",w);if(v===-1)break;let y=t.indexOf(";",w);if(y===-1)y=t.length;else if(y<v){w=t.lastIndexOf(";",v-1)+1;continue}const r=t.slice(w,v).trim();if(n[r]===void 0){let p=t.slice(v+1,y).trim();p.codePointAt(0)===34&&(p=p.slice(1,-1)),n[r]=Vt(p,h)}w=y+1}return n}function Se(t,l,n){const o=n||{},h=o.encode||Ut;if(typeof h!="function")throw new TypeError("option encode is invalid");if(!le.test(t))throw new TypeError("argument name is invalid");const w=h(l);if(w&&!le.test(w))throw new TypeError("argument val is invalid");let v=t+"="+w;if(o.maxAge!==void 0&&o.maxAge!==null){const y=o.maxAge-0;if(Number.isNaN(y)||!Number.isFinite(y))throw new TypeError("option maxAge is invalid");v+="; Max-Age="+Math.floor(y)}if(o.domain){if(!le.test(o.domain))throw new TypeError("option domain is invalid");v+="; Domain="+o.domain}if(o.path){if(!le.test(o.path))throw new TypeError("option path is invalid");v+="; Path="+o.path}if(o.expires){if(!Tt(o.expires)||Number.isNaN(o.expires.valueOf()))throw new TypeError("option expires is invalid");v+="; Expires="+o.expires.toUTCString()}if(o.httpOnly&&(v+="; HttpOnly"),o.secure&&(v+="; Secure"),o.priority)switch(typeof o.priority=="string"?o.priority.toLowerCase():o.priority){case"low":v+="; Priority=Low";break;case"medium":v+="; Priority=Medium";break;case"high":v+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}if(o.sameSite)switch(typeof o.sameSite=="string"?o.sameSite.toLowerCase():o.sameSite){case!0:v+="; SameSite=Strict";break;case"lax":v+="; SameSite=Lax";break;case"strict":v+="; SameSite=Strict";break;case"none":v+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return v}function Tt(t){return Object.prototype.toString.call(t)==="[object Date]"||t instanceof Date}function Vt(t,l){try{return l(t)}catch{return t}}function Rt(t){return t.includes("%")?decodeURIComponent(t):t}function Ut(t){return encodeURIComponent(t)}function W(t){if(typeof t!="object")return t;var l,n,o=Object.prototype.toString.call(t);if(o==="[object Object]"){if(t.constructor!==Object&&typeof t.constructor=="function"){n=new t.constructor;for(l in t)t.hasOwnProperty(l)&&n[l]!==t[l]&&(n[l]=W(t[l]))}else{n={};for(l in t)l==="__proto__"?Object.defineProperty(n,l,{value:W(t[l]),configurable:!0,enumerable:!0,writable:!0}):n[l]=W(t[l])}return n}if(o==="[object Array]"){for(l=t.length,n=Array(l);l--;)n[l]=W(t[l]);return n}return o==="[object Set]"?(n=new Set,t.forEach(function(h){n.add(W(h))}),n):o==="[object Map]"?(n=new Map,t.forEach(function(h,w){n.set(W(w),W(h))}),n):o==="[object Date]"?new Date(+t):o==="[object RegExp]"?(n=new RegExp(t.source,t.flags),n.lastIndex=t.lastIndex,n):o==="[object DataView]"?new t.constructor(W(t.buffer)):o==="[object ArrayBuffer]"?t.slice(0):o.slice(-6)==="Array]"?new t.constructor(t):t}const jt=c("div",{"x-divider":""},null,-1),Ae=ie({__name:"ServerRouteListItem",props:{item:{},index:{default:0}},setup(t){const l=B(!0),n=Te();return(o,h)=>{const w=he,v=Ie,y=Ae;return a(),_("div",null,[c("button",{flex:"~ gap-2","w-full":"","items-start":"","items-center":"","hover-bg-active":"",px2:"",py1:"",class:L([{"bg-active":e(n)===o.item.filepath}]),style:Qe({paddingLeft:`calc(0.5rem + ${o.index*1.5}em)`}),onClick:h[0]||(h[0]=r=>{l.value=!e(l),n.value=o.item.filepath})},[c("div",{class:L({"w-12":!o.item.routes}),"flex-none":"","text-left":""},[o.item.type==="collection"?(a(),x(w,{key:0,icon:"carbon:chevron-right","mb0.5":"","transform-rotate":e(l)?90:0,transition:""},null,8,["transform-rotate"])):(a(),x(v,{key:1,class:L(("getRequestMethodClass"in o?o.getRequestMethodClass:e(re))(o.item.method||"*")),textContent:A((o.item.method||"*").toUpperCase())},null,8,["class","textContent"]))],2),c("span",{class:L({"flex items-center":o.item.routes}),"text-sm":"","font-mono":""},[o.item.type==="collection"?(a(),x(w,{key:0,title:`${o.item.routes?.length} routes`,icon:"carbon:folder",mr1:""},null,8,["title"])):I("",!0),J(" "+A(o.item.route),1)],2)],6),jt,e(l)?te(o.$slots,"default",{key:0},()=>[(a(!0),_(N,null,M(o.item.routes,r=>(a(),x(y,{key:r.filepath,item:r,index:o.index+1},null,8,["item","index"]))),128))]):I("",!0)])}}}),Dt={p4:"",flex:"~ col gap-4"},Et={key:1,ml2:"",flex:""},It=["value"],Nt={key:0,flex:"","gap-4":""},Ot=c("div",{"flex-auto":""},null,-1),Le=ie({__name:"ServerRouteInputs",props:{modelValue:{},keys:{default:()=>[]},default:{default:()=>({})},disabled:{type:Boolean,default:!1}},setup(t,{emit:l}){const n=t,h=Xe(n,"modelValue",l,{passive:!0}),w=R(()=>[...n.keys,"active","key","value","type"]),v=R(()=>{const p={};for(const i of w.value)p[i]=n.default[i]||"";return p}),y=["string","number","boolean","file","date","time","datetime-local"];function r(p,i){const O=i.target;if(O.files&&O.files[0]){const F=O.files[0],H=new FileReader;H.readAsDataURL(F),H.onload=()=>{h.value[p].value=H.result}}}return Ve(()=>h,p=>{p.value.forEach(i=>{if(i.type==="number"&&typeof i.value!="number"){const O=Number.parseFloat(i.value);i.value=Number.isNaN(O)?0:O}else i.type==="boolean"&&typeof i.value!="boolean"?i.value=!0:i.type==="file"&&typeof i.value!="object"?i.value="":i.type==="date"&&typeof i.value=="string"&&!i.value.match(/^\d{4}-\d{2}-\d{2}$/)?i.value=new Date().toISOString().slice(0,10):i.type==="time"&&typeof i.value=="string"&&!i.value.match(/^\d{2}:\d{2}$/)?i.value=new Date().toISOString().slice(11,16):i.type==="datetime-local"&&typeof i.value=="string"&&!i.value.match(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}$/)?i.value=new Date().toISOString().slice(0,16):i.type==="string"&&(i.value=i.value.toString())})},{deep:!0,immediate:!0,flush:"sync"}),(p,i)=>{const O=gt,F=Re,H=Ne,U=he,C=ye;return a(),_("div",Dt,[(a(!0),_(N,null,M(e(h),(g,S)=>(a(),_("div",{key:S,flex:"~ gap-2","justify-around":""},[te(p.$slots,"input",{item:g}),(a(!0),_(N,null,M(e(w),f=>(a(),_(N,{key:f},[g.type!==null&&f==="active"?(a(),x(O,{key:0,modelValue:g[f],"onUpdate:modelValue":k=>g[f]=k,n:"sm primary",disabled:p.disabled},null,8,["modelValue","onUpdate:modelValue","disabled"])):I("",!0),g.type!==null&&f==="key"?(a(),x(F,{key:1,modelValue:g[f],"onUpdate:modelValue":k=>g[f]=k,placeholder:f,"flex-1":"","font-mono":"",n:"sm primary",disabled:p.disabled,class:L(p.disabled?"op50":"")},null,8,["modelValue","onUpdate:modelValue","placeholder","disabled","class"])):f==="value"?(a(),_(N,{key:2},[g.type==="file"?(a(),x(F,{key:0,type:"file",disabled:p.disabled,class:L(p.disabled?"op75":""),onChange:k=>r(S,k)},null,8,["disabled","class","onChange"])):g.type==="boolean"?(a(),_("div",Et,[b(O,{modelValue:g.value,"onUpdate:modelValue":k=>g.value=k,placeholder:"Value",n:"green lg",disabled:p.disabled},null,8,["modelValue","onUpdate:modelValue","disabled"])])):(a(),x(F,{key:2,modelValue:g.value,"onUpdate:modelValue":k=>g.value=k,type:g.type,placeholder:"Value","flex-1":"","font-mono":"",n:"sm primary",disabled:p.disabled,class:L(p.disabled?"op75":"")},null,8,["modelValue","onUpdate:modelValue","type","disabled","class"]))],64)):f==="type"?(a(),x(H,{key:3,modelValue:g.type,"onUpdate:modelValue":k=>g.type=k,n:"sm green",class:L(p.disabled?"op75":""),disabled:p.disabled},{default:$(()=>[(a(),_(N,null,M(y,k=>c("option",{key:k,value:k},A(k),9,It)),64))]),_:2},1032,["modelValue","onUpdate:modelValue","class","disabled"])):I("",!0)],64))),128)),te(p.$slots,"input-actions",{},()=>[b(C,{n:"red",disabled:p.disabled,class:L(p.disabled?"op0!":""),onClick:f=>e(h).splice(S,1)},{default:$(()=>[b(U,{icon:"carbon:trash-can"})]),_:2},1032,["disabled","class","onClick"])])]))),128)),p.disabled?I("",!0):(a(),_("div",Nt,[te(p.$slots,"actions",{params:e(h)},()=>[b(C,{icon:"carbon-add",n:"sm primary",my1:"","px-3":"",onClick:i[0]||(i[0]=g=>e(h).push({...e(v)}))},{default:$(()=>[J(" Add ")]),_:1}),Ot,e(h).length?(a(),x(C,{key:0,icon:"carbon-trash-can",n:"sm red",my1:"","px-3":"",onClick:i[1]||(i[1]=g=>h.value=[])},{default:$(()=>[J(" Remove All ")]),_:1})):I("",!0)])])),te(p.$slots,"default")])}}}),qt={path:"/",watch:!0,decode:t=>et(decodeURIComponent(t)),encode:t=>encodeURIComponent(typeof t=="string"?t:JSON.stringify(t))};function At(t,l){const n={...qt,...l},o=Lt(n)||{};let h;n.maxAge!==void 0?h=n.maxAge*1e3:n.expires&&(h=n.expires.getTime()-Date.now());const w=h!==void 0&&h<=0,v=W(w?void 0:o[t]??n.default?.()),y=h&&!w?Mt(v,h):B(v);{const r=typeof BroadcastChannel>"u"?null:new BroadcastChannel(`nuxt:cookies:${t}`),p=()=>{n.readonly||tt(y.value,o[t])||(Bt(t,y.value,n),r?.postMessage(n.encode(y.value)))};let i=!1;Ue()&&je(()=>{i=!0,p(),r?.close()}),r&&(r.onmessage=O=>{i=!0,o[t]=y.value=n.decode(O.data),Ye(()=>{i=!1})}),n.watch?Ve(y,()=>{i||p()},{deep:n.watch!=="shallow"}):p()}return y}function Lt(t={}){return $t(document.cookie,t)}function Pt(t,l,n={}){return l==null?Se(t,l,{...n,maxAge:-1}):Se(t,l,n)}function Bt(t,l,n={}){document.cookie=Pt(t,l,n)}const $e=2147483647;function Mt(t,l){let n,o=0;return Ue()&&je(()=>{clearTimeout(n)}),Ze((h,w)=>{function v(){clearTimeout(n);const y=l-o,r=y<$e?y:$e;n=setTimeout(()=>{if(o+=r,o<l)return v();t=void 0,w()},r)}return{get(){return h(),t},set(y){v(),t=y,w()}}})}const Ft={"h-full":"","w-full":"",flex:"~ col"},zt={flex:"~ col gap-2","flex-none":"",p4:"","n-navbar-glass":""},Ht={flex:"~ gap2 items-center"},Gt={relative:"","w-full":""},Wt={absolute:"","right-2":"","top-1.5":"",flex:"~ gap-1"},Jt={flex:"~ gap2 wrap","w-full":"","items-center":"",px4:"",pb2:"","text-center":"","text-sm":"",border:"b base"},Kt={class:"hidden md:block"},Qt=c("div",{"flex-auto":""},null,-1),Xt=c("div",{"text-xs":"",op50:""}," Send from ",-1),Yt=c("option",{value:"app"}," App ",-1),Zt=c("option",{value:"devtools"}," DevTools ",-1),eo={key:0,border:"b base","items-center":"",px4:"",py2:"",grid:"~ cols-[max-content_1fr] gap-2"},to={"text-right":"","font-mono":""},oo={key:1,border:"b base",p4:"",flex:"~ col gap-4","font-mono":""},no={flex:"~ gap-4"},so={flex:"~ gap2","mb--2":"","items-center":"",op50:""},ao=c("div",{"w-5":"","x-divider":""},null,-1),lo=c("div",{"flex-none":""}," Default Inputs ",-1),ro=c("div",{"x-divider":""},null,-1),io={key:2},uo={key:3,border:"b base",relative:"","n-code-block":""},co={flex:"~ wrap","w-full":""},po=["onClick"],fo=c("div",{border:"b base","flex-auto":""},null,-1),vo={border:"b base",flex:"~ gap2","items-center":"",px4:"",py2:""},mo=c("div",null,"Response",-1),ho={key:1,"text-xs":"",op50:""},yo=c("div",{"flex-auto":""},null,-1),bo=c("div",{op50:""}," Request finished in ",-1),go={key:0,"flex-auto":"","overflow-auto":""},_o={border:"~ base","h-full":"","w-full":"",rounded:""},ko=["data"],wo={key:2,"flex-auto":"","overflow-auto":"",p4:""},Co={border:"~ base",rounded:""},xo=["src"],So={key:1,controls:"",rounded:""},$o=["src"],To=ie({__name:"ServerRouteDetails",props:{route:{}},emits:["open-default-input"],setup(t,{emit:l}){const n=t,o=l,[h,w]=ot(),v=nt(),y=st(),r=me({contentType:"text/plain",data:"",statusCode:200,error:void 0,fetchTime:0}),p=R(()=>r.contentType.includes("application/json")?"json":r.contentType.includes("text/html")?"html":r.contentType.includes("text/css")?"css":r.contentType.includes("text/javascript")?"javascript":r.contentType.includes("image")||r.contentType.includes("video")?"media":r.contentType.includes("text/xml")||r.contentType.includes("application/xml")?"xml":r.contentType.includes("application/pdf")?"pdf":"text"),i=R(()=>{if(p.value==="json")return JSON.stringify(r.data,null,2);if(p.value==="media"||p.value==="pdf"){const s=new Blob([r.data],{type:r.contentType});return URL.createObjectURL(s)}return r.data}),O=B(!1),F=B(!1),H=at(),U=R(()=>n.route.route?.split(/((?:\*\*)?:[\w_]+)/g)),C=R(()=>U.value?.filter(s=>s.startsWith(":")||s.startsWith("**:"))||[]),g=B(n.route.method||"GET"),S=B({}),f=me({query:[{active:!0,key:"",value:"",type:"string"}],body:[{active:!0,key:"",value:"",type:"string"}],headers:[{active:!0,key:"Content-Type",value:"application/json",type:"string"}]}),k=B({}),{inputDefaults:j,sendFrom:q}=Oe("serverRoutes"),P=R(()=>y?.value?.app?.$fetch?q.value:"devtools"),ue=["GET","POST","PUT","PATCH","DELETE","HEAD"],de=["PATCH","POST","PUT","DELETE"],oe=R(()=>de.includes(g.value.toUpperCase())),T=B(),D=["input","json"],G=B(D[0]),ne=R({get:()=>f[T.value],set:s=>{f[T.value]=s}}),be=R(()=>({...Q(j.value.query),...Q(f.query)})),ge=R(()=>({...Q(j.value.headers),...Q(f.headers)})),ce=R(()=>oe.value?G.value==="json"?{...Q(j.value.body),...k.value}:{...Q(j.value.body),...Q(f.body)}:void 0),Pe=R(()=>{let s=window?.location.origin;return s.charAt(s.length-1)==="/"&&(s=s.slice(0,-1)),s}),se=R(()=>{let s=new URLSearchParams(be.value).toString();s&&(s=`?${s}`);const d=(U.value?.map(E=>(E.startsWith(":")||E.startsWith("**:"))&&S.value[E]||E).join("")||"")+s;let m=v.value?.app.baseURL||"";return(m==="./"||m===".")&&(m=""),m.endsWith("/")&&(m=m.slice(0,-1)),m+d}),_e=R(()=>Pe.value+se.value);function Q(s){const d=Object.fromEntries(s.filter(({active:m,key:E,value:V})=>m&&E&&V!==void 0).map(({key:m,value:E})=>[m,E]));return Object.entries(d).length?d:void 0}async function ke(){F.value=!0,O.value=!0;const s=Date.now(),d=P.value==="app"?y.value.app.$fetch:$fetch;ct("server-routes:fetch",{method:g.value,sendFrom:P.value});try{r.data=await d(_e.value,{method:g.value.toUpperCase(),headers:ge.value,query:be.value,body:ce.value,onResponse({response:m}){r.contentType=(m.headers.get("content-type")||"").toString().toLowerCase().trim(),r.statusCode=m.status,r.error=void 0},onResponseError(m){r.error=m.response._data,r.data=m.response._data}})}catch{}O.value=!1,r.fetchTime=Date.now()-s}const we=R(()=>{const s=[],d=[],m=Object.entries(ge.value).filter(([V,z])=>V&&z&&!(V==="Content-Type"&&z==="application/json")).map(([V,z])=>`  '${V}': '${z}'`).join(`,
`);g.value.toUpperCase()!=="GET"&&d.push(`method: '${g.value.toUpperCase()}'`),m&&d.push(`headers: {
${m}
}`),ce.value&&d.push(`body: ${JSON.stringify(ce.value,null,2)}`);const E=d.length?`, {
${d.join(`,
`).split(`
`).map(V=>`  ${V}`).join(`
`)}
}`:"";return s.push({name:"useFetch",lang:"javascript",docs:xe.nuxt.useFetch,code:`const { data, pending, error, refresh } = useFetch('${se.value}'${E})`}),s.push({name:"$fetch",lang:"javascript",docs:xe.nuxt.$fetch,code:`await $fetch('${se.value}'${E})`}),s}),X=B(Me()),K=me({key:"",value:""}),Be=R(()=>{const s=[];return C.value.length&&s.push({name:"Params",slug:"params",length:C.value.length}),s.push({name:"Query",slug:"query",length:f.query.length}),oe.value&&s.push({name:"Body",slug:"body",length:f.body.length}),s.push({name:"Headers",slug:"headers",length:f.headers.length}),s.push({name:"Cookies",slug:"cookies",length:X.value.length}),s.push({name:"Snippets",slug:"snippet"}),s});function Me(){return document.cookie.split("; ").map(s=>{const[d,m]=s.split("=");return{key:d,value:m}}).filter(s=>s.key)}function pe(s,d){if(!s)return;const m=X.value.find(V=>V.key===s),E=At(s);m!==void 0?d===void 0&&(X.value=X.value.filter(V=>V.key!==s)):(X.value.push({key:s,value:d}),K.key="",K.value=""),E.value=d}lt(()=>{G.value==="json"&&typeof k.value=="string"&&(k.value=JSON.parse(k.value))});const fe=rt("nuxt-devtools:server-routes:inputs",()=>[],{window:window.parent});it([f,T],()=>{const s=fe.value?.find(d=>d.path===n.route.filepath);if(s){T.value||(T.value=s.tab),s.tab!==T.value&&(s.tab=T.value);const{body:d,query:m,headers:E,params:V}=s.inputs;Object.assign(f,{body:d,query:m,headers:E}),S.value=V}else{const d={path:n.route.filepath,tab:C.value.length?"params":"query",inputs:{...f,...C.value.length?{params:S.value}:{}}};fe.value.push(d),T.value||(T.value=d.tab)}},{immediate:!0,deep:!0,debounce:500});function Fe(){fe.value=[],f.body=[],f.query=[],f.headers=[],S.value={},T.value=C.value.length?"params":"query"}const ze=ut();return(s,d)=>{const m=ye,E=Ne,V=Re,z=he,Ce=Le,He=_t,Ge=Ee,We=pt,ve=Ie,Je=kt,Ke=wt,ae=De("tooltip");return a(),_("div",Ft,[c("div",zt,[c("div",Ht,[s.route.method?(a(),x(m,{key:0,class:L(["n-badge-base n-sm",("getRequestMethodClass"in s?s.getRequestMethodClass:e(re))(e(g))]),"pointer-events-none":"","font-mono":"",tabindex:"-1"},{default:$(()=>[J(A(e(g).toUpperCase()),1)]),_:1},8,["class"])):(a(),x(E,{key:1,modelValue:e(g),"onUpdate:modelValue":d[0]||(d[0]=u=>Z(g)?g.value=u:null),class:L(["n-badge-base n-sm",("getRequestMethodClass"in s?s.getRequestMethodClass:e(re))(e(g))])},{default:$(()=>[(a(),_(N,null,M(ue,u=>c("option",{key:u,class:L(("getRequestMethodClass"in s?s.getRequestMethodClass:e(re))(u))},A(u.toUpperCase()),3)),64))]),_:1},8,["modelValue","class"])),c("div",Gt,[b(V,{"model-value":e(se),readonly:"","flex-auto":"","font-mono":"",p:"x5 y2",n:"sm"},null,8,["model-value"]),c("div",Wt,[ee(b(m,{title:"Copy URL",n:"xs blue",icon:"carbon:copy",border:!1,onClick:d[1]||(d[1]=u=>e(ze)(e(_e),"server-route-url"))},null,512),[[ae,"Copy URL"]]),ee(b(m,{title:"Open in Editor",icon:"carbon-launch",n:"xs blue",border:!1,onClick:d[2]||(d[2]=u=>e(H)(s.route.filepath))},null,512),[[ae,"Open in Editor"]])])]),b(m,{"h-full":"",n:"primary solid",onClick:ke},{default:$(()=>[b(z,{icon:"carbon:send"})]),_:1})])]),c("div",Jt,[(a(!0),_(N,null,M(e(Be),u=>ee((a(),x(m,{key:u.slug,class:L(e(T)===u.slug?"text-primary n-primary":"border-transparent shadow-none"),onClick:Y=>T.value=u.slug},{default:$(()=>[b(z,{icon:("ServerRouteTabIcons"in s?s.ServerRouteTabIcons:e(qe))[u.slug]},null,8,["icon"]),c("div",Kt,[J(A(u.name)+" "+A(u?.length?`(${u.length})`:"")+" ",1),c("span",null,A(e(j)[u.slug]?.length?`(${e(j)[u.slug].length})`:""),1)])]),_:2},1032,["class","onClick"])),[[ae,u.name]])),128)),Qt,Xt,b(E,{modelValue:e(P),"onUpdate:modelValue":d[3]||(d[3]=u=>Z(P)?P.value=u:null),class:"n-xs",disabled:!e(y)?.app?.$fetch},{default:$(()=>[Yt,Zt]),_:1},8,["modelValue","disabled"]),ee(b(m,{n:"orange",class:"p-3",icon:"i-carbon-clean",onClick:Fe},null,512),[[ae,"Clear Inputs Saved Cache"]])]),e(T)==="params"?(a(),_("div",eo,[(a(!0),_(N,null,M(e(C),u=>(a(),_(N,{key:u},[c("div",to,A(u),1),b(V,{modelValue:e(S)[u],"onUpdate:modelValue":Y=>e(S)[u]=Y,placeholder:u,"flex-1":""},null,8,["modelValue","onUpdate:modelValue","placeholder"])],64))),128))])):I("",!0),e(T)==="cookies"?(a(),_("div",oo,[(a(!0),_(N,null,M(e(X),u=>(a(),_("div",{key:u.key,flex:"~ gap-4 items-center"},[b(V,{placeholder:"Key...","model-value":u.key,disabled:"","op-70":""},null,8,["model-value"]),b(V,{placeholder:"Value...","model-value":u.value,"flex-1":"",n:"primary",onInput:Y=>pe(u.key,Y.target?.value)},null,8,["model-value","onInput"]),b(m,{title:"Delete",n:"red",onClick:Y=>pe(u.key,void 0)},{default:$(()=>[b(z,{icon:"i-carbon-trash-can"})]),_:2},1032,["onClick"])]))),128)),c("div",no,[b(V,{modelValue:e(K).key,"onUpdate:modelValue":d[4]||(d[4]=u=>e(K).key=u),placeholder:"Key",n:"primary","flex-1":""},null,8,["modelValue"]),b(V,{modelValue:e(K).value,"onUpdate:modelValue":d[5]||(d[5]=u=>e(K).value=u),placeholder:"Value",n:"primary","flex-1":""},null,8,["modelValue"]),b(m,{title:"Add",n:"primary",onClick:d[6]||(d[6]=u=>pe(e(K).key,e(K).value))},{default:$(()=>[b(z,{icon:"i-carbon-save"})]),_:1})])])):I("",!0),b(e(h),null,{default:$(()=>[b(Ce,{modelValue:e(ne),"onUpdate:modelValue":d[9]||(d[9]=u=>Z(ne)?ne.value=u:null),default:{active:!0,type:"string"},"max-h-xs":"","of-auto":""},{default:$(()=>[e(j)[e(T)]?.length?(a(),_(N,{key:0},[c("div",so,[ao,lo,b(m,{icon:"i-carbon-edit",border:!1,onClick:d[7]||(d[7]=u=>o("open-default-input"))}),ro]),b(Ce,{modelValue:e(j)[e(T)],"onUpdate:modelValue":d[8]||(d[8]=u=>e(j)[e(T)]=u),disabled:"",p0:""},null,8,["modelValue"])],64)):I("",!0)]),_:1},8,["modelValue"])]),_:1}),e(T)==="snippet"?(a(),_("div",io,[e(we).length?(a(),x(He,{key:0,"code-snippets":e(we)},null,8,["code-snippets"])):I("",!0)])):e(ne)?(a(),_("div",uo,[e(T)==="body"?(a(),_(N,{key:0},[c("div",co,[(a(),_(N,null,M(D,u=>c("button",{key:u,px4:"",py2:"",border:"r base",hover:"bg-active",class:L({"border-b":u!==e(G)}),onClick:Y=>G.value=u},[c("div",{class:L({op30:u!==e(G)}),"font-mono":""},A(u),3)],10,po)),64)),fo]),e(G)==="input"?(a(),x(e(w),{key:0})):e(G)==="json"?(a(),x(e(Ct),dt({key:1,modelValue:e(k),"onUpdate:modelValue":d[10]||(d[10]=u=>Z(k)?k.value=u:null),class:[[s.$colorMode.value==="dark"?"jse-theme-dark":"light"],"json-editor-vue of-auto text-sm outline-none"]},s.$attrs,{mode:"text","navigation-bar":!1,indentation:2,"tab-size":2}),null,16,["modelValue","class"])):I("",!0)],64)):(a(),x(e(w),{key:1}))])):I("",!0),e(F)?e(O)?(a(),x(We,{key:5,"z-10":"","flex-auto":"","backdrop-blur":""},{default:$(()=>[J(" Fetching... ")]),_:1})):(a(),_(N,{key:6},[c("div",vo,[mo,e(r).error?(a(),x(ve,{key:0,n:"red"},{default:$(()=>[J(" Error ")]),_:1})):I("",!0),b(ve,{n:e(r).error?"orange":"green",textContent:A(e(r).statusCode)},null,8,["n","textContent"]),e(r).contentType?(a(),_("code",ho,A(e(r).contentType),1)):I("",!0),e(r).contentType==="application/json"?(a(),x(Je,{key:2,getter:()=>({input:e(i)})},null,8,["getter"])):I("",!0),yo,bo,b(ve,{n:"green"},{default:$(()=>[J(A(e(r).fetchTime)+" ms ",1)]),_:1})]),e(p)==="pdf"?(a(),_("div",go,[c("div",_o,[c("object",{data:e(i),type:"application/pdf","flex-auto":"",width:"100%",height:"100%",rounded:""},null,8,ko)])])):e(p)!=="media"?(a(),x(Ke,{key:1,"flex-auto":"","overflow-auto":"","py-2":"",code:e(i),lang:e(p)},null,8,["code","lang"])):(a(),_("div",wo,[c("div",Co,[e(r).contentType.includes("image")?(a(),_("img",{key:0,rounded:"",src:e(i)},null,8,xo)):(a(),_("video",So,[c("source",{src:e(i),type:"video/mp4"},null,8,$o)]))])]))],64)):(a(),x(Ge,{key:4},{default:$(()=>[b(m,{n:"primary",onClick:ke},{default:$(()=>[b(z,{icon:"carbon:send"}),J(" Send request ")]),_:1})]),_:1}))])}}}),Vo={flex:"~ gap1","text-sm":""},Ro={key:0,op50:""},Uo={op50:""},jo=c("span",{op75:""},"Select a route to start",-1),Do=c("div",{p4:"",border:"b base"},[c("span",{"text-lg":""},"Default Inputs"),c("br"),c("span",{"text-white":"",op50:""},"Merged as default for every request in DevTools")],-1),Wo=ie({__name:"server-routes",setup(t){const l=B(!1),n=ft(),o=Te(),{selectedRoute:h,view:w,inputDefaults:v}=Oe("serverRoutes"),y=R(()=>{!o.value&&h.value&&(o.value=h.value.filepath);const U=n.value?.find(C=>C.filepath===o.value);return o.value!==h.value?.filepath&&U&&(h.value=U),U}),r=B(""),p=R(()=>new vt(n.value||[],{keys:["method","route"],shouldSort:!0})),i=R(()=>n.value?r.value?p.value.search(r.value).map(C=>C.item):n.value:[]),O=R(()=>{const U=[],C=(S,f)=>{S.routes=S.routes||[],S.routes.push(f)},g=(S,f)=>{const k=f?f.routes?.find(q=>q.route===S):U.find(q=>q.route===S);if(k)return k;const j={route:S,filepath:S.replace(/\W/g,"-").toLowerCase(),type:"collection",routes:[]};return f?C(f,j):U.push(j),j};return i.value.forEach(S=>{let f,k;const j=S.filepath.split("/"),q=j.slice(j.indexOf("server")+1);if(S.type==="runtime"){q[0]="runtime";const P=j.indexOf("dist");P!==-1&&(f=j[P-1],f&&q.splice(1,0,f))}q.length>0&&q[q.length-1].includes(".")&&q.pop(),q.forEach(P=>{k=g(P,k)}),k?C(k,S):U.push(S)}),U});function F(){w.value=w.value==="tree"?"list":"tree"}function H(U){return U.charAt(0).toUpperCase()+U.slice(1)}return(U,C)=>{const g=ye,S=bt,f=Ae,k=To,j=yt,q=Ee,P=mt,ue=Le,de=xt,oe=St,T=De("tooltip");return a(),_(N,null,[b(P,{"storage-key":"tab-server-routes"},{left:$(()=>[b(S,{search:e(r),"onUpdate:search":C[1]||(C[1]=D=>Z(r)?r.value=D:null),pb2:""},{actions:$(()=>[ee(b(g,{"text-lg":"",icon:e(w)==="list"?"i-carbon-list":"i-carbon-tree-view-alt",title:"Toggle view",border:!1,onClick:F},null,8,["icon"]),[[T,"Toggle View"]]),ee(b(g,{"text-lg":"",icon:"i-carbon-cics-sit-overrides",title:"Default Inputs",border:!1,onClick:C[0]||(C[0]=D=>l.value=!e(l))},null,512),[[T,"Default Inputs"]])]),default:$(()=>[c("div",Vo,[e(r)?(a(),_("span",Ro,A(e(i).length)+" matched · ",1)):I("",!0),c("span",Uo,A(e(n)?.length)+" routes in total",1)])]),_:1},8,["search"]),(a(!0),_(N,null,M(e(w)==="tree"?e(O):e(i),D=>(a(),x(f,{key:D.filepath,item:D},null,8,["item"]))),128))]),right:$(()=>[(a(),x(ht,{max:10},[e(y)?(a(),x(k,{key:e(y).filepath,route:e(y),onOpenDefaultInput:C[2]||(C[2]=D=>l.value=!0)},null,8,["route"])):I("",!0)],1024)),e(y)?I("",!0):(a(),x(q,{key:0},{default:$(()=>[b(j,{px6:"",py2:""},{default:$(()=>[jo]),_:1})]),_:1}))]),_:1}),b(oe,{modelValue:e(l),"onUpdate:modelValue":C[3]||(C[3]=D=>Z(l)?l.value=D:null),"auto-close":"","max-w-xl":"","min-w-xl":"",onClose:C[4]||(C[4]=D=>l.value=!1)},{default:$(()=>[c("div",null,[Do,(a(!0),_(N,null,M(Object.keys(e(v)),D=>(a(),x(de,{key:D,text:`${H(D)} ${e(v)[D].length?`(${e(v)[D].length})`:""}`,padding:!1,icon:("ServerRouteTabIcons"in U?U.ServerRouteTabIcons:e(qe))[D]},{default:$(()=>[b(ue,{modelValue:e(v)[D],"onUpdate:modelValue":G=>e(v)[D]=G,py0:"",default:{active:!0,type:"string"}},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["text","icon"]))),128))])]),_:1},8,["modelValue"])],64)}}});export{Wo as default};
