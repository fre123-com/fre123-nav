{"version":3,"sources":["../../../src/client/index.ts"],"sourcesContent":["import fs from 'fs'\nimport { createRequire } from 'module'\nimport type { SharedConfig } from '../types'\nconst _require = createRequire(import.meta.url)\n\nexport const RUNTIME_CLIENT_RUNTIME_PATH = '/@vite-plugin-checker-runtime'\nexport const RUNTIME_CLIENT_ENTRY_PATH = '/@vite-plugin-checker-runtime-entry'\n\nexport const wrapVirtualPrefix = (id: `/${string}`): `virtual:${string}` =>\n  `virtual:${id.slice('/'.length)}`\nexport const composePreambleCode = ({\n  baseWithOrigin = '/',\n  overlayConfig,\n}: {\n  baseWithOrigin: string\n  overlayConfig: SharedConfig['overlay']\n}) => `\nimport { inject } from \"${baseWithOrigin}${RUNTIME_CLIENT_RUNTIME_PATH.slice(1)}\";\ninject({\n  overlayConfig: ${JSON.stringify(overlayConfig)},\n  base: \"${baseWithOrigin}\",\n});\n`\n\n// #region\n// NOTE: sync modification with packages/runtime/src/ws.js\nexport const WS_CHECKER_ERROR_EVENT = 'vite-plugin-checker:error'\nexport const WS_CHECKER_RECONNECT_EVENT = 'vite-plugin-checker:reconnect'\n// #endregion\n\nexport const runtimeSourceFilePath = import.meta.url.endsWith('.ts')\n  ? // for development only, maybe should use NODE_ENV to distinguish\n    _require.resolve('../@runtime/main.js')\n  : _require.resolve('../../@runtime/main.js')\nexport const runtimeCode = `${fs.readFileSync(runtimeSourceFilePath, 'utf-8')};`\n"],"mappings":"AAAA,OAAO,QAAQ;AACf,SAAS,qBAAqB;AAE9B,MAAM,WAAW,cAAc,YAAY,GAAG;AAEvC,MAAM,8BAA8B;AACpC,MAAM,4BAA4B;AAElC,MAAM,oBAAoB,CAAC,OAChC,WAAW,GAAG,MAAM,IAAI,MAAM;AACzB,MAAM,sBAAsB,CAAC;AAAA,EAClC,iBAAiB;AAAA,EACjB;AACF,MAGM;AAAA,0BACoB,iBAAiB,4BAA4B,MAAM,CAAC;AAAA;AAAA,mBAE3D,KAAK,UAAU,aAAa;AAAA,WACpC;AAAA;AAAA;AAMJ,MAAM,yBAAyB;AAC/B,MAAM,6BAA6B;AAGnC,MAAM,wBAAwB,YAAY,IAAI,SAAS,KAAK;AAAA;AAAA,EAE/D,SAAS,QAAQ,qBAAqB;AAAA,IACtC,SAAS,QAAQ,wBAAwB;AACtC,MAAM,cAAc,GAAG,GAAG,aAAa,uBAAuB,OAAO;","names":[]}