{"version":3,"file":"date-picker.js","sources":["../../../../../../packages/components/date-picker/src/date-picker.tsx"],"sourcesContent":["import { defineComponent, provide, reactive, ref, toRef } from 'vue'\nimport dayjs from 'dayjs'\nimport customParseFormat from 'dayjs/plugin/customParseFormat.js'\nimport advancedFormat from 'dayjs/plugin/advancedFormat.js'\nimport localeData from 'dayjs/plugin/localeData.js'\nimport weekOfYear from 'dayjs/plugin/weekOfYear.js'\nimport weekYear from 'dayjs/plugin/weekYear.js'\nimport dayOfYear from 'dayjs/plugin/dayOfYear.js'\nimport isSameOrAfter from 'dayjs/plugin/isSameOrAfter.js'\nimport isSameOrBefore from 'dayjs/plugin/isSameOrBefore.js'\nimport { useNamespace } from '@element-plus/hooks'\nimport {\n  CommonPicker,\n  DEFAULT_FORMATS_DATE,\n  DEFAULT_FORMATS_DATEPICKER,\n} from '@element-plus/components/time-picker'\nimport { ROOT_PICKER_INJECTION_KEY } from './constants'\n\nimport { datePickerProps } from './props/date-picker'\nimport { getPanel } from './panel-utils'\nimport type { DatePickerExpose } from './instance'\n\ndayjs.extend(localeData)\ndayjs.extend(advancedFormat)\ndayjs.extend(customParseFormat)\ndayjs.extend(weekOfYear)\ndayjs.extend(weekYear)\ndayjs.extend(dayOfYear)\ndayjs.extend(isSameOrAfter)\ndayjs.extend(isSameOrBefore)\n\nexport default defineComponent({\n  name: 'ElDatePicker',\n  install: null,\n  props: datePickerProps,\n  emits: ['update:modelValue'],\n  setup(props, { expose, emit, slots }) {\n    const ns = useNamespace('picker-panel')\n\n    provide('ElPopperOptions', reactive(toRef(props, 'popperOptions')))\n    provide(ROOT_PICKER_INJECTION_KEY, {\n      slots,\n      pickerNs: ns,\n    })\n\n    const commonPicker = ref<InstanceType<typeof CommonPicker>>()\n    const refProps: DatePickerExpose = {\n      focus: (focusStartInput = true) => {\n        commonPicker.value?.focus(focusStartInput)\n      },\n      handleOpen: () => {\n        commonPicker.value?.handleOpen()\n      },\n      handleClose: () => {\n        commonPicker.value?.handleClose()\n      },\n    }\n\n    expose(refProps)\n\n    const onModelValueUpdated = (val: any) => {\n      emit('update:modelValue', val)\n    }\n\n    return () => {\n      // since props always have all defined keys on it, {format, ...props} will always overwrite format\n      // pick props.format or provide default value here before spreading\n      const format =\n        props.format ??\n        (DEFAULT_FORMATS_DATEPICKER[props.type] || DEFAULT_FORMATS_DATE)\n\n      const Component = getPanel(props.type)\n\n      return (\n        <CommonPicker\n          {...props}\n          format={format}\n          type={props.type}\n          ref={commonPicker}\n          onUpdate:modelValue={onModelValueUpdated}\n        >\n          {{\n            default: (scopedProps: /**FIXME: remove any type */ any) => (\n              <Component {...scopedProps} />\n            ),\n            'range-separator': slots['range-separator'],\n          }}\n        </CommonPicker>\n      )\n    }\n  },\n})\n"],"names":["dayjs","extend","localeData","advancedFormat","customParseFormat","weekOfYear","weekYear","dayOfYear","isSameOrAfter","isSameOrBefore","defineComponent","name","install","props","datePickerProps","emits","expose","emit","slots","useNamespace","provide","ROOT_PICKER_INJECTION_KEY","reactive","pickerNs","ref","commonPicker","focus","focusStartInput","handleOpen","handleClose","onModelValueUpdated","val","DEFAULT_FORMATS_DATEPICKER","DEFAULT_FORMATS_DATE","format","getPanel","_createVNode","default","scopedProps"],"mappings":"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"}